{% extends "quiz_base.html" %}

{% block quiz_title %}SES 598: Robotics and AI for Planetary Exploration - Course Quiz{% endblock %}

{% block extra_css %}
<style>
    .question {
        margin-bottom: 2rem;
        padding: 1rem;
        border: 1px solid #dee2e6;
        border-radius: 0.25rem;
        background-color: #fff;
    }
    .options {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        margin-top: 1rem;
    }
    .option {
        display: block;
        padding: 0.5rem;
        border: 1px solid #dee2e6;
        border-radius: 0.25rem;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .option:hover {
        background-color: #f8f9fa;
    }
    .progress {
        height: 1.5rem;
        background-color: #e9ecef;
        border-radius: 0.25rem;
    }
    .progress-bar {
        transition: width 0.6s ease;
    }
</style>
{% endblock %}

{% block mcq_questions %}
    {% if show_results %}
        <div class="alert alert-info">
            <h4>Quiz Results</h4>
            <div class="mb-3">
                <p class="mb-2">Overall Score: {{ score|floatformat:1 }}%</p>
                <div class="progress mb-3">
                    <div class="progress-bar" role="progressbar" style="width: {{ score }}%" aria-valuenow="{{ score }}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            
            <div class="mb-3">
                <h5>Category Scores:</h5>
                <div class="row">
                    <div class="col-md-6">
                        <p class="mb-1">SLAM & Localization: {{ category_scores.cv_score|floatformat:1 }}%</p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-info" role="progressbar" style="width: {{ category_scores.cv_score }}%"></div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p class="mb-1">Mapping & Environment: {{ category_scores.slam_score|floatformat:1 }}%</p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-success" role="progressbar" style="width: {{ category_scores.slam_score }}%"></div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p class="mb-1">Sensors & Navigation: {{ category_scores.sensing_score|floatformat:1 }}%</p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: {{ category_scores.sensing_score }}%"></div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p class="mb-1">Path Planning & Control: {{ category_scores.motion_score|floatformat:1 }}%</p>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-danger" role="progressbar" style="width: {{ category_scores.motion_score }}%"></div>
                        </div>
                    </div>
                </div>
            </div>

            {% if score >= 60 %}
                <div class="alert alert-success">
                    <h5>Congratulations! You've unlocked Part 2</h5>
                    <p>You can now proceed to the drone buddy challenge.</p>
                    <a href="{% url 'widget' 'drone_buddy' %}" class="btn btn-primary mt-3">Start Drone Buddy Challenge</a>
                </div>
            {% else %}
                <div class="alert alert-warning">
                    <h5>Part 2 is Locked</h5>
                    <p>Score at least 60% on Part 1 to unlock the drone buddy challenge.</p>
                    <div class="mt-3">
                        <form method="post" action="{% url 'ses598_quiz' %}">
                            {% csrf_token %}
                            <input type="hidden" name="reset" value="true">
                            <button type="submit" class="btn btn-primary">Try Part 1 Again</button>
                        </form>
                    </div>
                </div>
            {% endif %}
        </div>
    {% else %}
        <form method="post" id="quizForm">
            {% csrf_token %}
            <div class="question">
                <h3>1. What is the primary purpose of Simultaneous Localization and Mapping (SLAM) in robotics?</h3>
                <div class="options">
                    <label class="option"><input type="radio" name="q1" value="1" required> To create a robot's control algorithm</label>
                    <label class="option"><input type="radio" name="q1" value="2"> To detect objects in the robot's environment</label>
                    <label class="option"><input type="radio" name="q1" value="3"> To build a map of an unknown environment while tracking the robot's position</label>
                    <label class="option"><input type="radio" name="q1" value="4"> To program robot behaviors for obstacle avoidance</label>
                </div>
            </div>

            <div class="question">
                <h3>2. Which sensor is most commonly used for 3D mapping in robotic systems?</h3>
                <div class="options">
                    <label class="option"><input type="radio" name="q2" value="1" required> Ultrasonic sensor</label>
                    <label class="option"><input type="radio" name="q2" value="2"> LiDAR</label>
                    <label class="option"><input type="radio" name="q2" value="3"> Infrared sensor</label>
                    <label class="option"><input type="radio" name="q2" value="4"> GPS</label>
                </div>
            </div>

            <div class="question">
                <h3>3. In occupancy grid mapping, what does a high probability value in a grid cell represent?</h3>
                <div class="options">
                    <label class="option"><input type="radio" name="q3" value="1" required> The cell is likely to contain an obstacle</label>
                    <label class="option"><input type="radio" name="q3" value="2"> The cell is unexplored</label>
                    <label class="option"><input type="radio" name="q3" value="3"> The cell is part of free space</label>
                    <label class="option"><input type="radio" name="q3" value="4"> The cell is a probable goal location</label>
                </div>
            </div>

            <div class="question">
                <h3>4. What is a common challenge in using GPS for outdoor robotic navigation?</h3>
                <div class="options">
                    <label class="option"><input type="radio" name="q4" value="1" required> Lack of precision in densely populated environments</label>
                    <label class="option"><input type="radio" name="q4" value="2"> High energy consumption</label>
                    <label class="option"><input type="radio" name="q4" value="3"> Difficulty in avoiding static obstacles</label>
                    <label class="option"><input type="radio" name="q4" value="4"> Difficulty in path planning</label>
                </div>
            </div>

            <div class="question">
                <h3>5. Which algorithm is typically used for path planning in robotic mapping?</h3>
                <div class="options">
                    <label class="option"><input type="radio" name="q5" value="1" required> Breadth-First Search (BFS)</label>
                    <label class="option"><input type="radio" name="q5" value="2"> Dijkstra's Algorithm</label>
                    <label class="option"><input type="radio" name="q5" value="3"> Gradient Descent</label>
                    <label class="option"><input type="radio" name="q5" value="4"> Genetic Algorithm</label>
                </div>
            </div>

            <div class="mt-4">
                <button type="submit" class="btn btn-primary" id="submitBtn">Submit Quiz</button>
            </div>
        </form>
    {% endif %}
{% endblock %}

{% block interactive_section %}{% endblock %} 